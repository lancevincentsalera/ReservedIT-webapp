@*@model IEnumerable<ASI.Basecode.Services.ServiceModels.BookingViewModel>*@

@{
    ViewData["Title"] = "Reports";
}

@section styles {
    <link rel="stylesheet" href="~/css/reportsAndAnalytics.css" />
}

<div class="dashboard-header">
    <h1>Reports & Analytics</h1>
</div>
<div class="reports-container">
    <div class="first-header">
        <h1>Booking Summary</h1>
    </div>
    <div class="container-first">
        <div class="graph-header">
            <div>
                <h2>Room Booking Overview</h2>
            </div>
        </div>
        <div class="graphs">
            <canvas id="barChart"></canvas>
        </div>
    </div>
    <div class="container-first">
        <div class="graph-header">
            <div>
                <h2>Daily Booking Trends</h2>
            </div>
        </div>
        <div class="graphs">
            <canvas id="lineChart"></canvas> <!-- Added line chart canvas -->
        </div>
    </div>
    <div class="container-first">
        <div class="graph-header">
            <div>
                <h2>User Booking Frequency</h2>
                @*Search Bar*@
            </div>
        </div>
        <div class="table-userbooking">
            <div class="tablereport-header">
                <div class="report-cell">User Name</div>
                <div class="report-cell">No. of Bookings</div>
                <div class="report-cell">Last Booking Date</div>
                <div class="report-cell">Total Duration</div>
                <div class="report-cell">Most Booked Room</div>
            </div>
            <div class="tablereport-body">
                <!-- Rows will be added here dynamically or later -->
            </div>
        </div>
    </div>
    <div class="first-header">
        <h1>Room Usage Report</h1>
    </div>
    <div class="container-first">
        <div class="graph-header">
            <div>
                <h2>Room Usage Summary</h2>
                @*Search Bar*@
            </div>
        </div>
        <div class="table-userbooking">
            <div class="tablereport-header">
                <div class="report-cell">Room Name</div>
                <div class="report-cell">Total Booking</div>
                <div class="report-cell">Peak Day</div>
                <div class="report-cell">Peak Time</div>
                <div class="report-cell">Total Duration</div>
            </div>
            <div class="tablereport-body">
                @*temporary data*@
                <div class="report-row" onclick="toggleDetail(this)">
                    <div class="report-cell">Board Room</div>
                    <div class="report-cell">120</div>
                    <div class="report-cell">Wednesday</div>
                    <div class="report-cell">12:00 PM</div>
                    <div class="report-cell">120 hr</div>
                </div>
                <div class="detail-table" style="display: none;">
                    <div class="detail-header">
                        <h2 style="text-align: center; font-weight: bold; font-size: 15px;">User Activity Detail</h2>
                    </div>
                    <div class="tablereport-header" style="font-size:15px;">
                        <div class="report-cell">User Name</div>
                        <div class="report-cell">Booking Date</div>
                        <div class="report-cell">Start Time</div>
                        <div class="report-cell">End Time</div>
                        <div class="report-cell">Duration</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
<script src="~/js/reportsAndAnalytics.js"></script>
<script>
    function toggleDetail(row) {
        const detailTable = row.nextElementSibling;
        if (detailTable.style.display === "none" || detailTable.style.display === "") {
            detailTable.style.display = "block";
        } else {
            detailTable.style.display = "none";
        }
    }
</script>